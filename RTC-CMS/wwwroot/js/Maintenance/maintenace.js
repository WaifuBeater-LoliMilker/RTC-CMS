$(async function () {
    drawTable()
    $('#duration_plan,#duration_search').daterangepicker({
        locale: { format: 'DD/MM/YYYY' }
    });
})
var fullName = fullName || 'Admin';
function drawTable() {
    $('#task_table').tabulator({
        width: "auto",
        data: tasks,
        layout: "fitDataStretch",
        pagination: true,
        paginationSize: 10,
        rowHeight: 52,
        rowHeader: {
            headerSort: false,
            resizable: false,
            frozen: true,
            headerHozAlign: "center",
            hozAlign: "center",
            formatter: "rowSelection",
            titleFormatter: "rowSelection", cellClick: function (e, cell) {
                cell.getRow().toggleSelect();
            },
            width: '3px'
        },
        columns: [
            { title: "Trạng thái", field: "Status", formatter: 'html', minWidth: '210px' },
            { title: "Thiết bị", field: "MachineItemName", width: 200 },
            { title: "TG Dự kiến", field: "PlanDuration", formatter: 'html', minWidth: '210px' },
            { title: "TG Thực tế", field: "ActualDuration", formatter: 'html', minWidth: '210px' },
            { title: "Nội dung", field: "Content", minWidth: '260px' },
        ],
    })
}
function cellClick(e, cell) {

}
var tasks = [
    {
        Id: 1,
        CreatedName: 'Giga Chad',
        AssignedName: 'Sigma male',
        ApprovedName: null,
        MachineItemName: 'Conveyor Belt A102',
        Content: 'Scheduled belt replacement',
        DateStartPlan: '2025-05-22',
        DateEndPlan: '2025-06-04',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-22</div><div>-</div><div>2025-06-04</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 2,
        CreatedName: 'Maria Nguyen',
        AssignedName: 'Anh Le',
        ApprovedName: 'Kien Tran',
        MachineItemName: 'Băng tải cấp liệu B204',
        Content: 'Bảo dưỡng hệ thống dẫn hướng băng tải',
        DateStartPlan: '2025-05-20',
        DateEndPlan: '2025-05-22',
        DateStartActual: '2025-05-21',
        DateEndActual: '2025-05-22',
        Status: '<div class="status-cell status-3">Hoàn thành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-20</div><div>-</div><div>2025-05-22</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-05-21</div><div>-</div><div>2025-05-22</div></div>'
    },
    {
        Id: 3,
        CreatedName: 'Duc Tran',
        AssignedName: 'Linh Pham',
        ApprovedName: null,
        MachineItemName: 'Conveyor Motor C310',
        Content: 'Inspect position sensors on conveyor track',
        DateStartPlan: '2025-05-23',
        DateEndPlan: '2025-05-24',
        DateStartActual: '2025-05-23',
        DateEndActual: null,
        Status: '<div class="status-cell status-2">Đang thực hiện</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-23</div><div>-</div><div>2025-05-24</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-05-23</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 4,
        CreatedName: 'Khoa Bui',
        AssignedName: 'Minh Hoang',
        ApprovedName: null,
        MachineItemName: 'Hệ thống băng tải R102',
        Content: 'Nâng cấp phần mềm bộ điều khiển và kiểm tra tích hợp cảm biến mới',
        DateStartPlan: '2025-06-01',
        DateEndPlan: '2025-06-03',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-01</div><div>-</div><div>2025-06-03</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 5,
        CreatedName: 'Trang Vu',
        AssignedName: 'Bao Lam',
        ApprovedName: 'Huy Nguyen',
        MachineItemName: 'Conveyor Drive D450',
        Content: 'Hydraulic fluid replacement for conveyor tension unit',
        DateStartPlan: '2025-05-19',
        DateEndPlan: '2025-05-19',
        DateStartActual: '2025-05-19',
        DateEndActual: '2025-05-19',
        Status: '<div class="status-cell status-4">Đã hủy bỏ</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-19</div><div>-</div><div>2025-05-19</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-05-19</div><div>-</div><div>2025-05-19</div></div>'
    },
    {
        Id: 6,
        CreatedName: 'Luan Pham',
        AssignedName: 'Tam Doan',
        ApprovedName: null,
        MachineItemName: 'Conveyor Belt A103',
        Content: 'Inspect belt wear level',
        DateStartPlan: '2025-05-25',
        DateEndPlan: '2025-05-26',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-25</div><div>-</div><div>2025-05-26</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 7,
        CreatedName: 'Thanh Le',
        AssignedName: 'Hung Tran',
        ApprovedName: 'Lan Ngo',
        MachineItemName: 'Trạm điều hướng băng tải T305',
        Content: 'Kiểm tra độ chính xác cảm biến hướng băng tải',
        DateStartPlan: '2025-05-27',
        DateEndPlan: '2025-05-28',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-27</div><div>-</div><div>2025-05-28</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 8,
        CreatedName: 'Giang Bui',
        AssignedName: 'Quang Pham',
        ApprovedName: 'Ha Le',
        MachineItemName: 'Laser-guided Conveyor L500',
        Content: 'Align laser sensor for item tracking',
        DateStartPlan: '2025-05-29',
        DateEndPlan: '2025-05-30',
        DateStartActual: '2025-05-29',
        DateEndActual: null,
        Status: '<div class="status-cell status-2">Đang thực hiện</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-29</div><div>-</div><div>2025-05-30</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-05-29</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 9,
        CreatedName: 'Tien Phan',
        AssignedName: 'Ngoc Tran',
        ApprovedName: null,
        MachineItemName: 'Packaging Line Conveyor P210',
        Content: 'Maintenance for input belt system',
        DateStartPlan: '2025-06-01',
        DateEndPlan: '2025-06-01',
        DateStartActual: '2025-06-01',
        DateEndActual: '2025-06-01',
        Status: '<div class="status-cell status-3">Hoàn thành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-01</div><div>-</div><div>2025-06-01</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-06-01</div><div>-</div><div>2025-06-01</div></div>'
    },
    {
        Id: 10,
        CreatedName: 'Linh Nguyen',
        AssignedName: 'Tien Do',
        ApprovedName: 'Nhat Vu',
        MachineItemName: 'Trạm khí nén Conveyor K600',
        Content: 'Replace air filter in pneumatic system',
        DateStartPlan: '2025-06-03',
        DateEndPlan: '2025-06-03',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-03</div><div>-</div><div>2025-06-03</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 11,
        CreatedName: 'Phuc Vo',
        AssignedName: 'Viet Phan',
        ApprovedName: null,
        MachineItemName: 'Drive Motor Conveyor B203',
        Content: 'Adjust conveyor drive speed',
        DateStartPlan: '2025-06-05',
        DateEndPlan: '2025-06-06',
        DateStartActual: '2025-06-05',
        DateEndActual: null,
        Status: '<div class="status-cell status-2">Đang thực hiện</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-05</div><div>-</div><div>2025-06-06</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-06-05</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 12,
        CreatedName: 'Minh Dao',
        AssignedName: 'Nam Le',
        ApprovedName: 'Trang Nguyen',
        MachineItemName: 'Băng tải chính - Main Conveyor A',
        Content: 'Làm sạch con lăn dẫn hướng (Clean guide rollers)',
        DateStartPlan: '2025-05-28',
        DateEndPlan: '2025-05-28',
        DateStartActual: '2025-05-28',
        DateEndActual: '2025-05-28',
        Status: '<div class="status-cell status-3">Hoàn thành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-05-28</div><div>-</div><div>2025-05-28</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-05-28</div><div>-</div><div>2025-05-28</div></div>'
    },
    {
        Id: 13,
        CreatedName: 'Tam Dang',
        AssignedName: 'Chi Mai',
        ApprovedName: null,
        MachineItemName: 'Conveyor System B2',
        Content: 'Cập nhật chương trình điều khiển PLC (Update PLC program)',
        DateStartPlan: '2025-06-07',
        DateEndPlan: '2025-06-08',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-07</div><div>-</div><div>2025-06-08</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 14,
        CreatedName: 'Son Vu',
        AssignedName: 'Hai Pham',
        ApprovedName: 'Duc Le',
        MachineItemName: 'Băng tải linh kiện - Parts Conveyor',
        Content: 'Thay thế động cơ kéo băng (Replace conveyor drive motor)',
        DateStartPlan: '2025-06-09',
        DateEndPlan: '2025-06-10',
        DateStartActual: null,
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Chưa tiến hành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-09</div><div>-</div><div>2025-06-10</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>...</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 15,
        CreatedName: 'Bao Tran',
        AssignedName: 'Thao Nguyen',
        ApprovedName: null,
        MachineItemName: 'Conveyor Sensor Line C',
        Content: 'Bảo trì cảm biến tải vật (Sensor alignment and testing)',
        DateStartPlan: '2025-06-11',
        DateEndPlan: '2025-06-12',
        DateStartActual: '2025-06-11',
        DateEndActual: null,
        Status: '<div class="status-cell status-1">Đang thực hiện</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-11</div><div>-</div><div>2025-06-12</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-06-11</div><div>-</div><div>...</div></div>'
    },
    {
        Id: 16,
        CreatedName: 'Hien Le',
        AssignedName: 'Manh Hoang',
        ApprovedName: 'Tuan Anh',
        MachineItemName: 'End-of-Line Conveyor D1',
        Content: 'Kiểm tra xích và căn chỉnh puli (Chain inspection and pulley alignment)',
        DateStartPlan: '2025-06-13',
        DateEndPlan: '2025-06-14',
        DateStartActual: '2025-06-13',
        DateEndActual: '2025-06-14',
        Status: '<div class="status-cell status-3">Hoàn thành</div>',
        PlanDuration: '<div class="d-flex flex-row"><div>2025-06-13</div><div>-</div><div>2025-06-14</div></div>',
        ActualDuration: '<div class="d-flex flex-row"><div>2025-06-13</div><div>-</div><div>2025-06-14</div></div>'
    }
];
