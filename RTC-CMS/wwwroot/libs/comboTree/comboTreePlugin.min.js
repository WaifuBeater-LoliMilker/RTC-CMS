/*!
 * jQuery ComboTree Plugin
 * Author:  Erhan FIRAT
 * Mail:    erhanfirat@gmail.com
 * Licensed under the MIT license
 * Version: 1.3.1
 */
(function(n,t,r,u){function f(t,i){this.options=n.extend({},o,i);this._defaults=o;this._name=e;this.constructorFunc(t,i)}let e="comboTree";const o={source:[],isMultiple:!1,cascadeSelect:!1,selected:[],collapse:!1,selectAll:!1,animationTime:200};f.prototype.constructorFunc=function(t){this.input=t;this._input=n(t);this.init()};f.prototype.init=function(){this.id="ct-"+Math.floor(Math.random()*999999);this._input.addClass("ct-input-box");this._input.wrap('<div id="'+this.id+'-wrapper" class="ct-wrapper"><\/div>');this._input.wrap('<div class="ct-input-wrapper"><\/div>');this._wrapper=n("#"+this.id+"-wrapper");this._arrowBtn=n('<button class="ct-arrow-btn" type="button">â¯†<\/button>');this._input.after(this._arrowBtn);this._wrapper.append('<div class="ct-drop-down-container"><\/div>');this._dropDownContainer=this._wrapper.find(".ct-drop-down-container");this._dropDownContainer.html(this.createSourceHTML());this._filterInput=this.options.isMultiple?this._wrapper.find("#"+this.id+"-multi-filter"):null;this._selectAllInput=this.options.isMultiple&&this.options.selectAll?this._wrapper.find(".select-all-input"):null;this._sourceUl=this._wrapper.find(".ct-source-ul-main");this._listItems=this._dropDownContainer.find("li");this._listItemsTitle=this._dropDownContainer.find("span.ct-list-item-title");this._selectedItem={};this._selectedItems=[];this.processSelected();this.bindings()};f.prototype.unbind=function(){this._arrowBtn.off("click");this._input.off("click");this._listItems.off("click");this._listItemsTitle.off("click");this._listItemsTitle.off("mousemove");this._input.off("keyup");this._input.off("keydown");this._input.off("mouseup."+this.id);n(r).off("mouseup."+this.id)};f.prototype.destroy=function(){this.unbind();this._wrapper.before(this._input);this._wrapper.remove();this._input.removeData("plugin_"+e)};f.prototype.removeSourceHTML=function(){this._dropDownContainer.html("")};f.prototype.createSourceHTML=function(){let n="";return this.options.isMultiple&&(n+=this.createFilterHTMLForMultiSelect()),n+this.createSourceSubItemsHTML(this.options.source,!1)};f.prototype.createFilterHTMLForMultiSelect=function(){return'<input id="'+this.id+'-multi-filter" type="text" class="ct-multiples-filter" placeholder="Type to filter"/>'};f.prototype.createSelectAllHTMLForMultiSelect=function(){return'<li id="ct-select-all-li"><label class="select-all"><input type="checkbox" id="'+this.id+'-select-all-input"class="select-all-input">[Select All]<\/label><\/li>'};f.prototype.createSourceSubItemsHTML=function(n,t,i=false){let r='<ul id="'+this.id+"-source-ul"+(t?t:"-main")+'" class="ct-source-ul-'+(t?"parent":"main")+'" style="'+((this.options.collapse||i)&&t?"display:none;":"")+'">';t===!1&&this.options.isMultiple&&this.options.selectAll&&(r+=this.createSelectAllHTMLForMultiSelect());for(let t=0;t<n.length;t++)r+=this.createSourceItemHTML(n[t]);return r+="<\/ul>"};f.prototype.createSourceItemHTML=function(n){let t="";const i=n.hasOwnProperty("subs"),f=n.hasOwnProperty("collapse")?n.hasOwnProperty("collapse"):!1;let r=n.isSelectable===u?!0:n.isSelectable,e=r?"selectable":"not-selectable";return t+='<li id="ct-'+this.id+"-li-"+n.id+'" class="ct-item-'+(i?"parent":"child")+'"> ',t+=`${i?`<span class="ct-parent-plus">${this.options.collapse||f?"+":"-"}</span>`:""}<span
      data-id="${n.id}"
      data-selectable="${r}"
      class="ct-list-item-title ${e}"
    >${this.options.isMultiple&&r?'<input type="checkbox" />':""}${n.title}</span>`,i&&(t+=this.createSourceSubItemsHTML(n.subs,n.id,f)),t+"<\/li>"};f.prototype.bindings=function(){const t=this;n(this._input).focus(function(){t._dropDownContainer.is(":visible")||n(t._dropDownContainer).slideToggle(t.options.animationTime)});this._arrowBtn.on("click",function(n){n.stopPropagation();t.toggleDropDown()});this._input.on("click",function(n){n.stopPropagation();t._dropDownContainer.is(":visible")||t.toggleDropDown()});this._listItems.on("click",function(i){i.stopPropagation();n(this).hasClass("ct-item-parent")&&t.toggleSelectionTree(this)});this._listItemsTitle.on("click",function(n){n.stopPropagation();t.options.isMultiple?t.multiItemClick(this):t.singleItemClick(this)});this._listItemsTitle.on("mousemove",function(n){n.stopPropagation();t.dropDownMenuHover(this)});this._selectAllInput&&this._selectAllInput.parent("label").on("mousemove",function(n){n.stopPropagation();t.dropDownMenuHover(this)});this._input.on("keyup",function(n){n.stopPropagation();switch(n.keyCode){case 27:t.closeDropDownMenu();break;case 13:case 39:case 37:case 40:case 38:n.preventDefault();break;default:t.options.isMultiple||t.filterDropDownMenu()}});this._filterInput&&this._filterInput.on("keyup",function(i){i.stopPropagation();switch(i.keyCode){case 27:n(this).val()?(n(this).val(""),t.filterDropDownMenu()):t.closeDropDownMenu();break;case 40:case 38:i.preventDefault();t.dropDownInputKeyControl(i.keyCode-39);break;case 37:case 39:i.preventDefault();t.dropDownInputKeyToggleTreeControl(i.keyCode-38);break;case 13:t.multiItemClick(t._elemHoveredItem);i.preventDefault();break;default:t.filterDropDownMenu()}});this._input.on("keydown",function(n){n.stopPropagation();switch(n.keyCode){case 9:t.closeDropDownMenu();break;case 40:case 38:n.preventDefault();t.dropDownInputKeyControl(n.keyCode-39);break;case 37:case 39:n.preventDefault();t.dropDownInputKeyToggleTreeControl(n.keyCode-38);break;case 13:t.options.isMultiple?t.multiItemClick(t._elemHoveredItem):t.singleItemClick(t._elemHoveredItem);n.preventDefault();break;default:t.options.isMultiple&&n.preventDefault()}});n(r).on("mouseup."+t.id,function(n){!t._wrapper.is(n.target)&&t._wrapper.has(n.target).length===0&&t._dropDownContainer.is(":visible")&&t.closeDropDownMenu()});this._selectAllInput&&this._selectAllInput.on("click",function(i){i.stopPropagation();let r=n(i.target).prop("checked");r?t.selectAll():t.clearSelection()})};f.prototype.toggleDropDown=function(){const t=this;n(this._dropDownContainer).slideToggle(this.options.animationTime,function(){t._dropDownContainer.is(":visible")&&n(t._input).focus()})};f.prototype.closeDropDownMenu=function(){n(this._dropDownContainer).slideUp(this.options.animationTime)};f.prototype.toggleSelectionTree=function(t,i){const r=n(t).children("ul")[0];i===u?(n(r).is(":visible")?n(t).children("span.ct-parent-plus").html("+"):n(t).children("span.ct-parent-plus").html("-"),n(r).slideToggle(this.options.animationTime)):i!=1||n(r).is(":visible")?i==-1&&(n(r).is(":visible")?(n(t).children("span.ct-parent-plus").html("+"),n(r).slideUp(this.options.animationTime)):this.dropDownMenuHover(t)):(n(t).children("span.ct-parent-plus").html("-"),n(r).slideDown(this.options.animationTime))};f.prototype.selectMultipleItem=function(t){if(n(t).parent("li").hasClass("ct-item-parent")&&n(t).data("selectable")==!1&&this.toggleSelectionTree(n(t).parent("li")),n(t).data("selectable")==!0){this._selectedItem={id:n(t).attr("data-id"),title:n(t).text()};const i=this.isItemInArray(this._selectedItem,this.options.source);if(i){const i=this.isItemInArray(this._selectedItem,this._selectedItems);i?(this._selectedItems.splice(parseInt(i),1),n(t).find("input").prop("checked",!1)):(this._selectedItems.push(this._selectedItem),n(t).find("input").prop("checked",!0))}}};f.prototype.singleItemClick=function(t){n(t).data("selectable")==!0?(this._selectedItem={id:n(t).attr("data-id"),title:n(t).text()},this.refreshInputVal(),this.closeDropDownMenu()):n(t).parent("li").hasClass("ct-item-parent")&&this.toggleSelectionTree(n(t).parent("li"))};f.prototype.multiItemClick=function(t){if(this.selectMultipleItem(t),this.options.cascadeSelect&&n(t).data("selectable")&&n(t).parent("li").hasClass("ct-item-parent")){const i=n(t).parent("li").children("ul").first().find('input[type="checkbox"]');i.each(function(){const i=n(this);n(t).children('input[type="checkbox"]').first().prop("checked")!==i.prop("checked")&&(i.prop("checked",!n(t).children('input[type="checkbox"]').first().prop("checked")),i.trigger("click"))})}this.refreshInputVal()};f.prototype.isItemInArray=function(n,t){for(let i=0;i<t.length;i++){if(n.id==t[i].id&&n.title==t[i].title)return i+"";if(t[i].hasOwnProperty("subs")){const r=this.isItemInArray(n,t[i].subs);if(r)return r}}return!1};f.prototype.refreshInputVal=function(){let n="";if(this.options.isMultiple)for(let t=0;t<this._selectedItems.length;t++)n+=this._selectedItems[t].title,t<this._selectedItems.length-1&&(n+=", ");else n=this._selectedItem.title;this._input.val(n);this._input.trigger("change");this.changeHandler&&this.changeHandler()};f.prototype.dropDownMenuHover=function(t,i){this._wrapper.find(".ct-tree-item-hover").removeClass("ct-tree-item-hover");n(t).addClass("ct-tree-item-hover");this._elemHoveredItem=n(t);i&&t&&this.dropDownScrollToHoveredItem(this._elemHoveredItem)};f.prototype.dropDownScrollToHoveredItem=function(n){this._sourceUl.parent().scrollTop(n[0].offsetTop-30)};f.prototype.dropDownInputKeyToggleTreeControl=function(t){const i=this._elemHoveredItem;n(i).parent("li").hasClass("ct-item-parent")?this.toggleSelectionTree(n(i).parent("li"),t):t==-1&&this.dropDownMenuHover(i)};f.prototype.dropDownInputKeyControl=function(n){this._dropDownContainer.is(":visible")||this.toggleDropDown();const t=this._listItems.find("span.ct-list-item-title:visible");let i=this._elemHoveredItem?t.index(this._elemHoveredItem)+n:0;i=(t.length+i)%t.length;this.dropDownMenuHover(t[i],!0)};f.prototype.filterDropDownMenu=function(){let t="";const i=this;t=this.options.isMultiple?this._wrapper.find("#"+i.id+"-multi-filter").val():this._input.val();t!=""?(this._listItemsTitle.hide(),this._listItemsTitle.siblings("span.ct-parent-plus").hide(),list=this._listItems.filter(function(n,i){return i.innerHTML.toLowerCase().indexOf(t.toLowerCase())!=-1}).each(function(){n(this.children).show();n(this).siblings("span.ct-parent-plus").show()})):(this._listItemsTitle.show(),this._listItemsTitle.siblings("span.ct-parent-plus").show())};f.prototype.processSelected=function(){const i=this._listItemsTitle;let t=this._selectedItem,r=this._selectedItems;this.options.selected.forEach(function(u){let f=n(i).filter(function(){return n(this).data("id")==u});f.length>0&&(n(f).find("input").attr("checked",!0),t={id:f.data("id"),title:f.text()},r.push(t))});this._selectedItem=t;this.refreshInputVal()};f.prototype.findItembyId=function(n,t){if(n&&t)for(let i=0;i<t.length;i++){if(t[i].id==n)return{id:t[i].id,title:t[i].title};if(t[i].hasOwnProperty("subs")){let r=this.findItembyId(n,t[i].subs);if(r)return r}}return null};f.prototype.getSelectedIds=function(){if(this.options.isMultiple&&this._selectedItems.length>0){const n=[];for(i=0;i<this._selectedItems.length;i++)n.push(this._selectedItems[i].id);return n}return!this.options.isMultiple&&this._selectedItem.hasOwnProperty("id")?[this._selectedItem.id]:null};f.prototype.getSelectedNames=function(){if(this.options.isMultiple&&this._selectedItems.length>0){const n=[];for(i=0;i<this._selectedItems.length;i++)n.push(this._selectedItems[i].title);return n}return!this.options.isMultiple&&this._selectedItem.hasOwnProperty("id")?this._selectedItem.title:null};f.prototype.setSource=function(n){this._selectedItems=[];this.destroy();this.options.source=n;this.constructorFunc(this.input,this.options)};f.prototype.clearSelection=function(){for(i=0;i<this._selectedItems.length;i++){let t="#ct-"+this.id+"-li-"+this._selectedItems[i].id;t=t.replaceAll(".","\\.");let r=this._wrapper.find(t);n(r).find("input").prop("checked",!1)}this._selectedItems=[];this._selectedItem={};this._selectAllInput&&this._selectAllInput.prop("checked",!1);this.refreshInputVal()};f.prototype.setSelection=function(t){if(t&&t.length&&t.length>0)for(let i=0;i<t.length;i++){let r=this.findItembyId(t[i],this.options.source);if(r){let u=this.isItemInArray(r,this.options.source);if(u){const u=this.isItemInArray(r,this._selectedItems);if(!u){let u="#"+this.id+"-li"+t[i];u=u.replaceAll(".","\\.");let f=n(u);this._selectedItems.push(r);this._selectedItem=r;this.options.cascadeSelect?n(f).find("input").prop("checked",!0):n(f).find("input:first").prop("checked",!0)}}}}this.refreshInputVal()};f.prototype.selectAll=function(){const t=this;this._selectedItems=[];this._wrapper.find("#"+this.id+"-source-ul-main").find("[data-selectable=true] input[type='checkbox']").each(function(i,r){let u=n(r).parent("span").first(),f={id:u.data("id"),title:u.text()};n(r).prop("checked",!0);t._selectedItems.push(f)});this._selectAllInput&&this._selectAllInput.prop("checked",!0);this.refreshInputVal()};f.prototype.onChange=function(n){n&&typeof n=="function"&&(this.changeHandler=n)};n.fn[e]=function(t){const i=[];return this.each(function(){n.data(this,"plugin_"+e)||(n.data(this,"plugin_"+e,new f(this,t)),i.push(n(this).data()["plugin_"+e]))}),this.length==1?i[0]:i}})(jQuery,window,document);const comboTreeIcons={downIcon:`<?xml version="1.0" encoding="utf-8"?><svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M7 10L12 15L17 10" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>`,plus:`<?xml version="1.0" encoding="utf-8"?><svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 12H15" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 9L12 15" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,minus:`<?xml version="1.0" encoding="utf-8"?><svg width="800px" height="800px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 12H15" stroke="#323232" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`};